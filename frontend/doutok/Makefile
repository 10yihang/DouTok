# DouTok å‰ç«¯ Makefile

.PHONY: help dev build start install lint clean docker-build docker-run docker-stop api

# é»˜è®¤ç›®æ ‡
help:
	@echo "DouTok å‰ç«¯å¼€å‘å‘½ä»¤:"
	@echo "  dev          - å¯åŠ¨å¼€å‘æœåŠ¡å™¨"
	@echo "  build        - æ„å»ºç”Ÿäº§ç‰ˆæœ¬"
	@echo "  start        - å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨"
	@echo "  install      - å®‰è£…ä¾èµ–"
	@echo "  lint         - ä»£ç æ£€æŸ¥"
	@echo "  clean        - æ¸…ç†æ„å»ºæ–‡ä»¶"
	@echo "  api          - ç”Ÿæˆ API ä»£ç "
	@echo "  docker-build - æ„å»º Docker é•œåƒ"
	@echo "  docker-run   - è¿è¡Œ Docker å®¹å™¨"
	@echo "  docker-stop  - åœæ­¢ Docker å®¹å™¨"

# å¼€å‘
dev:
	@echo "ğŸš€ å¯åŠ¨å¼€å‘æœåŠ¡å™¨..."
	@pnpm dev

# æ„å»º
build:
	@echo "ğŸ”¨ æ„å»ºç”Ÿäº§ç‰ˆæœ¬..."
	@pnpm build

# å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨
start:
	@echo "â–¶ï¸  å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨..."
	@pnpm start

# å®‰è£…ä¾èµ–
install:
	@echo "ğŸ“¦ å®‰è£…ä¾èµ–..."
	@pnpm install

# ä»£ç æ£€æŸ¥
lint:
	@echo "ğŸ” ä»£ç æ£€æŸ¥..."
	@pnpm lint

# æ¸…ç†
clean:
	@echo "ğŸ§¹ æ¸…ç†æ„å»ºæ–‡ä»¶..."
	@rm -rf .next
	@rm -rf node_modules
	@rm -rf dist

# ç”ŸæˆAPIä»£ç 
api:
	@echo "ğŸ”„ ç”Ÿæˆ API ä»£ç ..."
	@pnpm gen-svapi

# Docker ç›¸å…³å‘½ä»¤
docker-build:
	@echo "ğŸ³ æ„å»º Docker é•œåƒ..."
	@docker build -t doutok-frontend .

docker-run:
	@echo "ğŸš€ è¿è¡Œ Docker å®¹å™¨..."
	@docker run -d --name doutok-frontend -p 23000:23000 doutok-frontend

docker-stop:
	@echo "ğŸ›‘ åœæ­¢ Docker å®¹å™¨..."
	@docker stop doutok-frontend || true
	@docker rm doutok-frontend || true

# å¼€å‘ç¯å¢ƒå®Œæ•´å¯åŠ¨
dev-full: install api dev

# ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²
deploy: clean install api build docker-build